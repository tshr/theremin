<!DOCTYPE html>
<html>
<head>
  <script src="theremin.js"></script>
  <style>
    input[type=range] {
      width: 100%;
    }
  </style>
</head>
<body>

  <input id="theremin_tone_slider" type="range" name="points" min="1" max="1000">
  <input id="theremin_gain_slider" type="range" name="points" min="0" max="1" step="0.001">

  <div>Wouldn't It Be Nice?</div>
  <a id="play" class="player_control" href="">play</a>
  <a id="pause" class="player_control" href="">pause</a>

  <script>
    window.onload = function() {

      var context = Theremin.setContext(new AudioContext());

      //Theremin
      var oscillator = context.createOscillator();
      var gain = context.createGain();
      var theremin_tone_slider = document.getElementById("theremin_tone_slider");
      var theremin_gain_slider = document.getElementById("theremin_gain_slider");

      theremin_tone_slider.addEventListener('input', function() {
        oscillator.frequency.value = this.value;
      }, true);

      theremin_gain_slider.addEventListener('input', function() {
        gain.gain.value = this.value;
      }, true);

      oscillator.connect(gain);
      gain.connect(context.destination);

      oscillator.frequency.value = theremin_tone_slider.value;
      gain.gain.value = theremin_gain_slider.value;
      // oscillator.start(0);

      // Wouldn't It Be Nice
      var wouldnt_it_be_nice_player = new Theremin.Player();
      wouldnt_it_be_nice_player.loadBuffer("wouldnt_it_be_nice.mp3");

      var player_controls = document.querySelectorAll(".player_control");

      for (var i = 0; i < player_controls.length; i++) {
        player_controls[i].addEventListener('click', function(e) {
          e.preventDefault();
          wouldnt_it_be_nice_player[this.id]();
        });
      }
    };
  </script>
</body>
</html>